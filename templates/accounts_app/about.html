{% extends 'base.html' %}

{% block title %}About Me{% endblock %}

{% block content %}
<!-- Cyber About Page -->
<div class="relative min-h-screen overflow-hidden"
    style="background: linear-gradient(160deg, #253900 0%, #000000 50%, #1a2800 100%);">

    <style>
        /* Matrix canvas */
        #about-matrix {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.06;
            pointer-events: none;
            z-index: 0;
        }

        /* Scanlines */
        .about-scanlines {
            position: fixed;
            inset: 0;
            background: repeating-linear-gradient(to bottom, transparent 0px, transparent 3px, rgba(0, 0, 0, 0.07) 3px, rgba(0, 0, 0, 0.07) 4px);
            pointer-events: none;
            z-index: 1;
        }

        /* Glow heading */
        .cyber-h1 {
            color: #7FFF00;
            text-shadow: 0 0 10px #7FFF00, 0 0 30px #00FF00, 0 0 70px rgba(127, 255, 0, 0.35);
            font-family: monospace;
            letter-spacing: 2px;
        }

        .cyber-h2 {
            color: #7FFF00;
            text-shadow: 0 0 6px #7FFF00, 0 0 18px rgba(127, 255, 0, 0.5);
            font-family: monospace;
            letter-spacing: 1px;
        }

        /* Divider line */
        .cyber-divider {
            height: 2px;
            background: linear-gradient(90deg, transparent, #7FFF00, transparent);
            margin: 0.5rem auto 0;
            width: 6rem;
            border-radius: 4px;
        }

        /* Card */
        .cyber-card {
            position: relative;
            background: rgba(0, 10, 0, 0.75);
            border: 1px solid rgba(127, 255, 0, 0.18);
            border-radius: 14px;
            backdrop-filter: blur(8px);
            transition: box-shadow 0.4s ease, border-color 0.4s ease, transform 0.4s ease;
        }

        .cyber-card:hover {
            box-shadow: 0 0 30px 4px rgba(127, 255, 0, 0.2), 0 6px 30px rgba(0, 0, 0, 0.5);
            border-color: rgba(127, 255, 0, 0.5);
            transform: translateY(-4px);
        }

        /* Card top accent bar sweep */
        .cyber-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #7FFF00, transparent);
            border-radius: 9px;
            transition: width 0.5s ease;
        }

        .cyber-card:hover::before {
            width: 100%;
        }

        /* Left accent bar */
        .cyber-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 0;
            background: linear-gradient(to bottom, #7FFF00, transparent);
            border-radius: 9px;
            transition: height 0.5s ease;
        }

        .cyber-card:hover::after {
            height: 60%;
        }

        /* Timeline left bar */
        .cyber-timeline-bar {
            border-left: 2px solid rgba(127, 255, 0, 0.35);
            padding-left: 1.5rem;
            position: relative;
        }

        .cyber-timeline-bar::before {
            content: '';
            position: absolute;
            left: -6px;
            top: 1rem;
            width: 10px;
            height: 10px;
            background: #7FFF00;
            border-radius: 50%;
            box-shadow: 0 0 8px #7FFF00, 0 0 18px rgba(127, 255, 0, 0.5);
        }

        /* Body text */
        .cyber-text {
            color: rgba(200, 255, 200, 0.85);
            font-family: monospace;
            line-height: 1.9;
        }

        .cyber-text-muted {
            color: rgba(127, 255, 0, 0.55);
            font-family: monospace;
            font-size: 0.8rem;
        }

        /* Resume button */
        .cyber-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 2rem;
            border: 1.5px solid #7FFF00;
            color: #7FFF00;
            font-family: monospace;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none;
            background: transparent;
            transition: background 0.3s ease, box-shadow 0.3s ease, transform 0.3s ease;
            letter-spacing: 1px;
        }

        .cyber-btn:hover {
            background: rgba(127, 255, 0, 0.1);
            box-shadow: 0 0 20px 4px rgba(127, 255, 0, 0.3);
            transform: translateY(-3px);
        }

        /* Section fade-in on scroll */
        .cyber-reveal {
            opacity: 0;
            transform: translateY(28px);
            transition: opacity 0.7s ease, transform 0.7s ease;
        }

        .cyber-reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Corner tag */
        .cyber-tag {
            font-family: monospace;
            font-size: 0.65rem;
            color: rgba(127, 255, 0, 0.45);
            letter-spacing: 1px;
        }
    </style>

    <!-- Matrix Rain -->
    <canvas id="about-matrix"></canvas>
    <!-- Scanlines -->
    <div class="about-scanlines"></div>

    <!-- Page Content -->
    <div class="relative z-10 max-w-4xl mx-auto px-6 py-20">

        <!-- Heading -->
        <div class="text-center mb-14 cyber-reveal">
            <span class="cyber-tag block mb-3">[ IDENTITY_FILE ]</span>
            <h1 class="text-5xl md:text-6xl font-bold cyber-h1 mb-2">About Me</h1>
            <div class="cyber-divider"></div>
            {% if profile.resume %}
            <div class="mt-8">
                <a href="{{ profile.resume.url }}" target="_blank" class="cyber-btn">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
                        </path>
                    </svg>
                    &#x27A4; Download Resume
                </a>
            </div>
            {% endif %}
        </div>

        <!-- Bio Card -->
        <div class="cyber-card p-8 md:p-10 mb-10 cyber-reveal">
            <div class="flex justify-between items-start mb-5">
                <h2 class="text-2xl font-bold cyber-h2">&gt; Bio</h2>
                <span class="cyber-tag">[ BIO.txt ]</span>
            </div>
            <p class="cyber-text text-lg">
                {% if profile and profile.bio %}
                {{ profile.bio|linebreaks }}
                {% else %}
                I am a passionate <span style="color:#7FFF00; font-weight:bold;">Computer Science and Engineering</span>
                student at <span style="color:#7FFF00; font-weight:bold;">Lovely Professional University</span> with a
                strong interest in <span style="color:#7FFF00; font-weight:bold;">Cyber Security</span> and
                <span style="color:#7FFF00; font-weight:bold;">Software Development</span>. I am constantly learning,
                adaptable, and driven to improve my technical expertise while creating efficient, secure, and impactful
                solutions.
                {% endif %}
            </p>
        </div>

        {% if education %}
        <!-- Education -->
        <div class="mb-10 cyber-reveal">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold cyber-h2">&gt; Education</h2>
                <div class="cyber-divider"></div>
            </div>
            <div class="space-y-6">
                {% for edu in education %}
                <div class="cyber-card p-6 cyber-timeline-bar">
                    <span class="cyber-tag">[{{ forloop.counter|stringformat:"02d" }}]</span>
                    <h3 class="text-xl font-semibold mt-1 mb-1"
                        style="color:#7FFF00; text-shadow:0 0 6px rgba(127,255,0,0.4); font-family:monospace;">
                        {{ edu.institution }}
                    </h3>
                    <p class="cyber-text font-semibold">{{ edu.degree }}</p>
                    <p class="cyber-text-muted mb-2">
                        {{ edu.start_date|date:"M Y" }} — {% if edu.end_date %}{{ edu.end_date|date:"M Y" }}{% else
                        %}Present{% endif %}
                    </p>
                    <p class="cyber-text text-sm">{{ edu.description }}</p>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        {% if experience %}
        <!-- Experience -->
        <div class="cyber-reveal">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold cyber-h2">&gt; Experience</h2>
                <div class="cyber-divider"></div>
            </div>
            <div class="space-y-6">
                {% for exp in experience %}
                <div class="cyber-card p-6 cyber-timeline-bar">
                    <span class="cyber-tag">[{{ forloop.counter|stringformat:"02d" }}]</span>
                    <h3 class="text-xl font-semibold mt-1 mb-1"
                        style="color:#7FFF00; text-shadow:0 0 6px rgba(127,255,0,0.4); font-family:monospace;">
                        {{ exp.company }}
                    </h3>
                    <p class="cyber-text font-semibold">{{ exp.role }}</p>
                    <p class="cyber-text-muted mb-2">
                        {{ exp.start_date|date:"M Y" }} — {% if exp.end_date %}{{ exp.end_date|date:"M Y" }}{% else
                        %}Present{% endif %}
                    </p>
                    <p class="cyber-text text-sm">{{ exp.description }}</p>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

    </div>
</div>

<!-- About Page JS: Matrix Rain + Scroll Reveal -->
<script>
    (function () {
        /* Matrix Rain */
        var canvas = document.getElementById('about-matrix');
        if (canvas) {
            var ctx = canvas.getContext('2d');
            function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
            resize();
            window.addEventListener('resize', resize);
            var cols = Math.floor(canvas.width / 16);
            var drops = Array.from({ length: cols }, function () { return Math.random() * -60; });
            var chars = '01アイウエオカキクケコサシスセソ#$%&@!?<>ABCDEF';
            function draw() {
                ctx.fillStyle = 'rgba(0,0,0,0.08)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#00AA00';
                ctx.font = '14px monospace';
                drops.forEach(function (y, i) {
                    ctx.fillText(chars[Math.floor(Math.random() * chars.length)], i * 16, y * 16);
                    drops[i] = y > canvas.height / 16 + Math.random() * 10 ? 0 : y + 1;
                });
            }
            setInterval(draw, 60);
        }

        /* Scroll Reveal */
        var revealEls = document.querySelectorAll('.cyber-reveal');
        var obs = new IntersectionObserver(function (entries) {
            entries.forEach(function (e) { if (e.isIntersecting) { e.target.classList.add('visible'); } });
        }, { threshold: 0.12 });
        revealEls.forEach(function (el) { obs.observe(el); });
    })();
</script>
{% endblock %}